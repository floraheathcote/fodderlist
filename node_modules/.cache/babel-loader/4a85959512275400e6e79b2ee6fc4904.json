{"ast":null,"code":"import { StringMapObserver } from \"@stimulus/mutation-observers\";\n\nvar ValueObserver = function () {\n  function ValueObserver(context, receiver) {\n    this.context = context;\n    this.receiver = receiver;\n    this.stringMapObserver = new StringMapObserver(this.element, this);\n    this.valueDescriptorMap = this.controller.valueDescriptorMap;\n    this.invokeChangedCallbacksForDefaultValues();\n  }\n\n  ValueObserver.prototype.start = function () {\n    this.stringMapObserver.start();\n  };\n\n  ValueObserver.prototype.stop = function () {\n    this.stringMapObserver.stop();\n  };\n\n  Object.defineProperty(ValueObserver.prototype, \"element\", {\n    get: function get() {\n      return this.context.element;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ValueObserver.prototype, \"controller\", {\n    get: function get() {\n      return this.context.controller;\n    },\n    enumerable: false,\n    configurable: true\n  }); // String map observer delegate\n\n  ValueObserver.prototype.getStringMapKeyForAttribute = function (attributeName) {\n    if (attributeName in this.valueDescriptorMap) {\n      return this.valueDescriptorMap[attributeName].name;\n    }\n  };\n\n  ValueObserver.prototype.stringMapValueChanged = function (attributeValue, name) {\n    this.invokeChangedCallbackForValue(name);\n  };\n\n  ValueObserver.prototype.invokeChangedCallbacksForDefaultValues = function () {\n    for (var _i = 0, _a = this.valueDescriptors; _i < _a.length; _i++) {\n      var _b = _a[_i],\n          key = _b.key,\n          name_1 = _b.name,\n          defaultValue = _b.defaultValue;\n\n      if (defaultValue != undefined && !this.controller.data.has(key)) {\n        this.invokeChangedCallbackForValue(name_1);\n      }\n    }\n  };\n\n  ValueObserver.prototype.invokeChangedCallbackForValue = function (name) {\n    var methodName = name + \"Changed\";\n    var method = this.receiver[methodName];\n\n    if (typeof method == \"function\") {\n      var value = this.receiver[name];\n      method.call(this.receiver, value);\n    }\n  };\n\n  Object.defineProperty(ValueObserver.prototype, \"valueDescriptors\", {\n    get: function get() {\n      var valueDescriptorMap = this.valueDescriptorMap;\n      return Object.keys(valueDescriptorMap).map(function (key) {\n        return valueDescriptorMap[key];\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ValueObserver;\n}();\n\nexport { ValueObserver };","map":null,"metadata":{},"sourceType":"module"}