<%= turbo_frame_tag "meal_with_leftover_form" do %>

    <%= form_with(scope: :meal_with_leftover, url:meal_leftover_meal_with_leftovers_path(meal, leftover), :html=> {:id => "meal#{meal.id}leftover#{leftover.id}"}, data: {controller: 'hello', action: 'turbo:submit-end->hello#reset'} ) do |form| %>

    <%#= form_with(model: [meal, meal_with_leftover], id: dom_id(meal_with_leftover)) do |form| %>

      <% if meal_with_leftover.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(meal_with_leftover.errors.count, "error") %> prohibited this meal_with_leftover from being saved:</h2>

          <ul>
          <% meal_with_leftover.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      

      <div class="form-group">
        <%= form.label :portions %>
        <%= form.text_field :portions, autofocus: true, class: 'form-control' %>
      </div>

      <div class="form-group">
        <% if meal_with_leftover.persisted? %>
          <div class="float-right">
            <%= link_to 'Destroy', leftover_meal_with_leftover_path(@leftover, meal_with_leftover), method: :delete, class: "text-danger", data: { confirm: 'Are you sure?' } %>
          </div>
        <% end %>

        <%= form.submit class: 'btn btn-primary' %>

        <% if meal_with_leftover.persisted? %>
          <%#= link_to "Cancel", meal_with_leftover, class: "btn btn-link" %>
        <% else %>
          <%#= link_to "Cancel", meal_with_leftovers_path, class: "btn btn-link" %>
        <% end %>
      </div>
    <% end %>

<% end %>